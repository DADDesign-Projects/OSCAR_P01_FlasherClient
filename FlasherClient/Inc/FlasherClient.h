//==================================================================================
//==================================================================================
// File: FlasherClient.h
// Description: Utility for flashing QSPI Flash memory from a PC
//
// Copyright (c) 2024-2025 Dad Design.
//==================================================================================
//==================================================================================

#pragma once

//**********************************************************************************
// Includes and namespace
//**********************************************************************************
#include "main.h"
#include "usbd_cdc_if.h"
#include "Buff.h"
#include "cFlasherStorage.h"

//**********************************************************************************
// Static constants
//**********************************************************************************
#define VAL_TIMEOUT 100                                      // Timeout value for block reception

//**********************************************************************************
// Public method declarations
//**********************************************************************************

// ---------------------------------------------------------------------------------
// UsbCallbackFlasher - Reception of data read from USB serial link (COMxx)
// ---------------------------------------------------------------------------------
extern "C" void UsbCallbackFlasher(uint8_t* buf, uint32_t* len);

// ---------------------------------------------------------------------------------
// BlocProcess - Process a received block
// ---------------------------------------------------------------------------------
extern bool BlocProcess(uint16_t NumBloc);

// ---------------------------------------------------------------------------------
// FlasherClient - Main flasher client application function
// ---------------------------------------------------------------------------------
extern void FlasherClient(void);

//***End of file**************************************************************
